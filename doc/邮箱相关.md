## 邮箱相关

```C++
enum HALL_ASSID_MAIL							// MDM_GP_MAIL
{
	ASS_GP_MAIL_LIST = 0,						// 获取邮件列表
	ASS_GP_OPEN_MAIL = 1,						// 打开邮件
	ASS_GP_GET_ATTACHMENT = 2,					// 获取附件
	ASS_GP_DEL_MAIL = 3,						// 删除邮件
	ASS_GP_NOTIFY_NEW_MAIL = 4,					// 提示新邮件
	ASS_GP_GET_SYSMSG = 5,						// 
};



	//邮件相关
	DTK_GP_MAIL_BEGIN,
		DTK_GP_MAIL_LIST,						// 获取邮件列表
		DTK_GP_OPEN_MAIL,						// 打开邮件
		DTK_GP_GET_ATTACHMENT,					// 获取附件
		DTK_GP_DEL_MAIL,						// 删除邮件
		DTK_GP_UPDATE_MAIL,						// 
		DTK_GP_UPDATE_SYSTEM,					// 
	DTK_GP_MAIL_END,
```



//DTK_GP_UPDATE_SYSTEM 的结构体

```C++
struct DL_O_HALL_SysMsg
{
	DataBaseResultLine					ResultHead;
	bool								bBroadcast;
	MSG_GP_O_SysMsg						_data;   //系统公告
};
```





CLINET邮箱系统

```C++
	// 添加邮件
	void HNMailData::addMail(MSG_GP_O_Mail_List_Data* mail)
	{
		if (!mail) return;

		DataNode data;

		if (!IsUTF8(mail->szMailTitle, sizeof(mail->szMailTitle)))
		{
			strcpy(mail->szMailTitle, GBKToUtf8(mail->szMailTitle));
		}
		if (!IsUTF8(mail->szSendName, sizeof(mail->szSendName)))
		{
			strcpy(mail->szSendName, GBKToUtf8(mail->szSendName));
		}
		data.mailID = mail->iMailID;
		data.title = mail->szMailTitle;
		data.name = mail->szSendName;
		data.iState = mail->bMailState;
		data.iKeepTime = mail->iKeepTime;
		data.iSendTime = mail->i64MailTime;

		updateMail(&data);
	}
```

结构体

```C++
struct MSG_GP_O_Mail_List_Data
{
	int		iMailID;				// 邮件ID
	char	szMailTitle[25];		// 邮件标题
	char	szSendName[25];			// 发件人
	LLONG	i64MailTime;			// 发件时间
	BYTE	bMailState;				// 邮件状态  0无附件未读，1无附件已读，2有附件未读，3有附件已读未领取，4有附件已读已领取
	BYTE	iKeepTime;				// 有效时间（天数）
};
```



```C++
// 更新邮件列表（新增邮件，删除邮件）
struct MSG_GP_O_Mail_Update
{
	int		iUserID;				// ID
	bool	bNew;					// true新邮件，false删除邮件
	MSG_GP_O_Mail_List_Data mail;	// 邮件内容
};
```

