## 龙虎斗战斗流程

bug:1胜率控制会选择最小的,但是没有相等的情况下的代码

​	2 筹码区最少的会选择开,但是和的倍率大



//生牌,对比的

```C++
	//根据区域类型生成牌型
void SendCardPlayerListener::GenerateByType(emWinAreaType emType)
{
	if(emType == Area_Invalid) return;
	OBJ_GET_EXT(m_Context,DataManage,exDataMgr);
	vector<int> vAllCard;
	const int iMaxSize = 13;
	for(int i = 1; i <= iMaxSize; ++i)
		vAllCard.push_back(i);

	switch(emType)
	{
	case Area_Long:
		{
			int iLong = rand() % 12 + 1;		//1到12
			int iHu = iLong + (rand() % (iMaxSize - iLong) + 1);		// iLong到后面的值
			CardBase::GetRandOneCard( iLong, exDataMgr->vSendCard[1] );		//虎来接收龙的牌
			CardBase::GetRandOneCard( iHu, exDataMgr->vSendCard[0] );
		}
		break;
	case Area_Hu:
		//龙随机前12,虎随机龙右边的数值
		{
			int iLong = rand() % 12 + 1;		//1到12
			int iHu = iLong + (rand() % (iMaxSize - iLong) + 1);		// iLong到后面的值
			CardBase::GetRandOneCard( iLong, exDataMgr->vSendCard[0] );
			CardBase::GetRandOneCard( iHu, exDataMgr->vSendCard[1] );
		}
		break;
	case Area_He:
		{
			CardBase::GetRandTwoCard(rand() % iMaxSize + 1, exDataMgr->vSendCard);
		}
		break;
	default:
		break;
	}
}
```





```C++
//这个是适配器
bool DataManage::shuffleCard()
{
	_cardHeap.Clear();
	_cardHeap.addOnePairCard();
	_cardHeap.randCard();
	vSendCard.assign(_cardHeap.getArray().begin(),
		_cardHeap.getArray().begin() + ONE_HAND_CARD_COUNT);

	if (vSendCard[0].getRealVal() == vSendCard[1].getRealVal())
	{
		byWinQuYu = 3;
	}
	else if(vSendCard[0].getRealVal()==14)
	{
		byWinQuYu = 2;
	}
	else if(vSendCard[1].getRealVal()==14)
	{
		byWinQuYu = 1;
	}
	else if(vSendCard[0].getRealVal() > vSendCard[1].getRealVal())
	{
		byWinQuYu = 1;
	}
	else if(vSendCard[0].getRealVal() < vSendCard[1].getRealVal())
	{
		byWinQuYu = 2;
	}
	return true;
}

```



//这个是决定着开奖

```C++
	BYTE	     byWinQuYu;			  //中奖区域   1：龙    2：虎  3：和
```

```C++
const	int	BET_ARES = 3;	//3个下注区域    下标0表示龙区域  1虎   2 和
```

```C++
	int		    byQuYu;			//下注区域  1：龙    2：虎  3：和
```

```C++
	__int64				  i64UserXiaZhuData[BET_ARES];			    //玩家区域下注信息
```

```C++
	int						rAresData[BET_ARES][CHOUMA_NUM];    //每个区域里的各种筹码的个数
```

```C++
	int		    			rAresData[BET_ARES][CHOUMA_NUM]; //每个区域里的各种筹码的个数(GameStation_SendCard)
```

```C++
	BYTE		byShowCard[2];							 //开牌数据下标0为龙的牌值，1为虎
```

