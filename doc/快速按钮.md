```c++
//快速坐下的主函数
void requestQuickSit(BYTE deskNo = 255, std::string password = "");

void HNRoomLogicBase::requestQuickSit(BYTE deskNo/* = 255*/, std::string password/* = ""*/)
{
		MSG_GR_S_UserSit data;              //这是桌子的属性
		data.bDeskIndex = deskNo;			//桌子的索引
		data.bDeskStation = 255;			//桌子位置
		strcpy(data.szPassword, password.c_str()); //桌子密码(忽略)
		RoomLogic()->sendData(MDM_GR_USER_ACTION, ASS_GR_FAST_JOIN_IN, &data, sizeof(data));
}


//发送信息的
INT HNRoomLogic::sendData(UINT MainID, UINT AssistantID, void* object, INT objectSize)
{	
		// 未登录状态禁止发送游戏消息
		if (!_logined && MainID == MDM_GM_GAME_NOTIFY) return -1;
		return _socketLogic->send(MainID, AssistantID, HNSocketProtocolData::GameCheckCode, object, objectSize);
}



#define ASS_GR_FAST_JOIN_IN			    27		                //快速坐桌
//玩家动作
#define MDM_GR_USER_ACTION				102						//用户动作，玩家坐桌，起身，断线等都是以该值为主标志
```

快速按钮.









```c++

		//换桌
		virtual void sendChangeDesk();



```







???

```c++
void VipRoomLogic::setDeskNo(int deskNo)
{
	Director::getInstance()->getScheduler()->schedule([=](float fDelta)
	{
		if (RoomLogic()->getRoomRule() & GRR_GAME_BUY)
		{
			// 延迟获取当前桌子信息
			getDeskInfo(deskNo);
		}
	}, this, 0.0f, 0, 0.0f, false, "delayGetDeskInfo");

	// 监听重连之后重新获取桌子信息
	_listener = EventListenerCustom::create(RECONNECTION, [=](EventCustom* event) {
		
		if (RoomLogic()->getRoomRule() & GRR_GAME_BUY)
		{
			// 延迟获取当前桌子信息
			getDeskInfo(deskNo);
		}
	});

	Director::getInstance()->getEventDispatcher()->addEventListenerWithFixedPriority(_listener, 1);
}
```







获取桌子信息

```c++
void VipRoomLogic::getDeskInfo(int deskNo)
{
	VipDeskInfo getInfo;
	getInfo.byDeskIndex = deskNo;

	RoomLogic()->sendData(MDM_GR_DESKRUNOUT, ASS_GR_GETDESKMASTER, &getInfo, sizeof(VipDeskInfo),
		HN_SOCKET_CALLBACK(VipRoomLogic::getDeskInfoMessagesEventSelector, this));
}
```

