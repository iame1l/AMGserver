## 水果机胜率控制,送灯系统

```C++
int iBeilv[3][2]={{20,10},{30,15},{40,20}};
	srand(GetTickCount());
	int irand=rand()%100;//随机产生倍率
	if(irand < m_iBeilu_20_10)
	{
		m_iLBeilv=iBeilv[0][0];
		m_iRBeilv=iBeilv[0][1];
	}
	else if(irand < m_iBeilu_20_10 + m_iBeilu_30_15)
	{
		m_iLBeilv=iBeilv[1][0];
		m_iRBeilv=iBeilv[1][1];
	}
	else if(irand <  m_iBeilu_20_10 + m_iBeilu_30_15 + m_iBeilu_40_20)
	{
		
		m_iLBeilv=iBeilv[2][0];
		m_iRBeilv=iBeilv[2][1];
	}
```







```C++
	case C_S_BIBEI:				//押大小消息
		{
			OnHandleBibei(bDeskStation,pData,uSize);
			return true;
		}
```





```C++
struct  S_C_BiBeiResultStru
{
	int iwinmoney;
	int iType; //1代表开小，2代表开大
	S_C_BiBeiResultStru()
	{
		memset(this,0,sizeof(this));
	}
};
```





大小胜率的控制,(i的问题)

```C++
	for(int i=0;i<200;i++)//i是控制key
	//for(int i=0;i<1;i++)
	{
		srand(GetTickCount()+i);//+i控制了种子池
		//srand(GetTickCount());//正常种子池
		int irand=rand()%100;//[0,100)
		iTempResult=rand()%2+1;
		if(iTempResult==m_iBibeiType)
		{
			iWinMoney=iBibeiMoney*2;
		}
		else
		{
			iWinMoney=0;
		}

		if((irand >= 0)&& (irand <= 49))
		{
			if(iWinMoney == 0)
			{
				break;
			}
		}
		else
		{
			if(G_i64Pond - iWinMoney>0)//保证奖池为正
			{
				break;
			}
		}
	}
```





```C++
#define C_S_AWARD_LAMP                        56               //客户端发过来的请求发送奖励灯的数据
```

